{
  "version": 3,
  "sources": ["gear-lab-store.ts"],
  "sourcesContent": ["/**\r\n * Centralized store for Gear Lab data\r\n * Handles loading, saving, and migrating inner ability preset configuration\r\n *\r\n * DATA FLOW:\r\n * 1. User changes preset input\r\n * 2. Event listener fires UI handler\r\n * 3. UI handler calls gearLabStore.updatePreset()\r\n * 4. Store updates memory + saves to localStorage (immediate write)\r\n */\r\n\r\nimport type {\r\n    GearLabData,\r\n    InnerAbilityPreset,\r\n    InnerAbilityLine,\r\n    LegacyHeroPowerPresets,\r\n    LegacyCubePotentialData,\r\n    CubeSlotId,\r\n    PotentialType,\r\n    PotentialLine,\r\n    PotentialSet,\r\n    CubeSlotData,\r\n    AllCubeSlotData,\r\n    Rarity\r\n} from '@ts/types/page/gear-lab/gear-lab.types';\r\nimport { DEFAULT_GEAR_LAB_DATA, EMPTY_POTENTIAL_LINE, EMPTY_POTENTIAL_SET } from '@ts/types/page/gear-lab/gear-lab.types';\r\n\r\nexport class GearLabStore {\r\n    private data: GearLabData;\r\n    private isInitialized: boolean = false;\r\n\r\n    // ========================================================================\r\n    // CONSTRUCTOR\r\n    // ========================================================================\r\n\r\n    constructor() {\r\n        // Initialize with default data - will be populated by initialize()\r\n        this.data = JSON.parse(JSON.stringify(DEFAULT_GEAR_LAB_DATA));\r\n    }\r\n\r\n    // ========================================================================\r\n    // INITIALIZATION\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Initialize store - loads from localStorage, handles migration\r\n     * Call this at the top of the application initialization\r\n     *\r\n     * @returns Promise that resolves when initialization is complete\r\n     */\r\n    async initialize(): Promise<void> {\r\n        if (this.isInitialized) {\r\n            console.warn('GearLabStore already initialized');\r\n            return;\r\n        }\r\n\r\n        // 1. Try loading from new 'gear-lab-data' key\r\n        const newData = localStorage.getItem('gear-lab-data');\r\n\r\n        if (newData) {\r\n            try {\r\n                this.data = JSON.parse(newData);\r\n                console.log('GearLabStore: Loaded from new format (gear-lab-data)');\r\n            } catch (e) {\r\n                console.error('GearLabStore: Failed to parse gear-lab-data, falling back to migration', e);\r\n                this.migrateFromLegacy();\r\n            }\r\n        } else {\r\n            // 2. If new key doesn't exist, migrate from old 'heroPowerPresets' key\r\n            this.migrateFromLegacy();\r\n        }\r\n\r\n        // 3. Validate and fill in missing fields with defaults\r\n        this.validateAndFillDefaults();\r\n\r\n        this.isInitialized = true;\r\n        console.log('GearLabStore: Initialization complete', this.data);\r\n    }\r\n\r\n    /**\r\n     * Migrate data from legacy localStorage keys to new format\r\n     */\r\n    private migrateFromLegacy(): void {\r\n        console.log('GearLabStore: Migrating from legacy format...');\r\n\r\n        // Migrate Inner Ability from heroPowerPresets\r\n        const legacyInnerAbilityStr = localStorage.getItem('heroPowerPresets');\r\n        if (legacyInnerAbilityStr) {\r\n            try {\r\n                const legacy: LegacyHeroPowerPresets = JSON.parse(legacyInnerAbilityStr);\r\n\r\n                // Migrate each preset\r\n                Object.entries(legacy).forEach(([key, preset]) => {\r\n                    const presetId = parseInt(key);\r\n                    if (presetId >= 1 && presetId <= 10) {\r\n                        this.data.innerAbility.presets[presetId] = {\r\n                            id: presetId,\r\n                            isEquipped: preset.isEquipped || false,\r\n                            lines: preset.lines || []\r\n                        };\r\n                    }\r\n                });\r\n\r\n                console.log('GearLabStore: Inner Ability migration complete');\r\n\r\n                // Clean up old localStorage key after successful migration\r\n                localStorage.removeItem('heroPowerPresets');\r\n                console.log('GearLabStore: Deleted heroPowerPresets key');\r\n            } catch (error) {\r\n                console.error('GearLabStore: Failed to migrate heroPowerPresets:', error);\r\n            }\r\n        } else {\r\n            console.log('GearLabStore: No legacy heroPowerPresets found');\r\n        }\r\n\r\n        // Migrate Cube Potential from old state.js format\r\n        this.migrateCubePotentialFromLegacy();\r\n\r\n        console.log('GearLabStore: Migration complete, saving to new format...');\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Migrate cube potential data from legacy format\r\n     */\r\n    private migrateCubePotentialFromLegacy(): void {\r\n        // Try to read from localStorage with key 'cubePotentialData'\r\n        const legacyDataStr = localStorage.getItem('cubePotentialData');\r\n        if (!legacyDataStr) {\r\n            console.log('GearLabStore: No legacy cubePotentialData found in localStorage');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const legacyCubeData: LegacyCubePotentialData = JSON.parse(legacyDataStr);\r\n\r\n            // Migrate each slot\r\n            Object.entries(legacyCubeData).forEach(([slotId, slotData]) => {\r\n                // Validate slotId is a valid CubeSlotId\r\n                if (this.isValidCubeSlotId(slotId)) {\r\n                    this.data.cubePotential[slotId as CubeSlotId] = {\r\n                        regular: {\r\n                            rarity: slotData.regular.rarity || 'normal',\r\n                            rollCount: slotData.regular.rollCount || 0,\r\n                            setA: this.validatePotentialSet(slotData.regular.setA),\r\n                            setB: this.validatePotentialSet(slotData.regular.setB)\r\n                        },\r\n                        bonus: {\r\n                            rarity: slotData.bonus.rarity || 'normal',\r\n                            rollCount: slotData.bonus.rollCount || 0,\r\n                            setA: this.validatePotentialSet(slotData.bonus.setA),\r\n                            setB: this.validatePotentialSet(slotData.bonus.setB)\r\n                        }\r\n                    };\r\n                }\r\n            });\r\n\r\n            console.log('GearLabStore: Cube potential migration complete');\r\n\r\n            // Clean up old localStorage key after successful migration\r\n            localStorage.removeItem('cubePotentialData');\r\n            console.log('GearLabStore: Deleted cubePotentialData key');\r\n        } catch (error) {\r\n            console.error('GearLabStore: Failed to migrate cube potential:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validate if a string is a valid CubeSlotId\r\n     */\r\n    private isValidCubeSlotId(slotId: string): boolean {\r\n        const validSlots: CubeSlotId[] = ['helm', 'cape', 'chest', 'shoulder', 'legs', 'belt', 'gloves', 'boots', 'ring', 'necklace', 'eye-accessory'];\r\n        return validSlots.includes(slotId as CubeSlotId);\r\n    }\r\n\r\n    /**\r\n     * Validate and sanitize a potential set\r\n     */\r\n    private validatePotentialSet(set: any): PotentialSet {\r\n        return {\r\n            line1: this.validatePotentialLine(set?.line1),\r\n            line2: this.validatePotentialLine(set?.line2),\r\n            line3: this.validatePotentialLine(set?.line3)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Validate and sanitize a potential line\r\n     */\r\n    private validatePotentialLine(line: any): PotentialLine {\r\n        if (!line || typeof line.stat !== 'string') {\r\n            return { ...EMPTY_POTENTIAL_LINE };\r\n        }\r\n        return {\r\n            stat: line.stat || '',\r\n            value: typeof line.value === 'number' ? line.value : 0,\r\n            prime: Boolean(line.prime)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Validate data structure and fill missing fields with defaults\r\n     */\r\n    private validateAndFillDefaults(): void {\r\n        const defaults = DEFAULT_GEAR_LAB_DATA;\r\n\r\n        // Validate innerAbility.presets\r\n        if (!this.data.innerAbility?.presets) {\r\n            this.data.innerAbility = {\r\n                presets: { ...defaults.innerAbility.presets }\r\n            };\r\n        }\r\n\r\n        // Ensure all presets 1-10 exist\r\n        for (let i = 1; i <= 10; i++) {\r\n            if (!this.data.innerAbility.presets[i]) {\r\n                this.data.innerAbility.presets[i] = {\r\n                    id: i,\r\n                    isEquipped: false,\r\n                    lines: []\r\n                };\r\n            } else {\r\n                // Validate preset structure\r\n                const preset = this.data.innerAbility.presets[i];\r\n                if (typeof preset.id !== 'number') preset.id = i;\r\n                if (typeof preset.isEquipped !== 'boolean') preset.isEquipped = false;\r\n                if (!Array.isArray(preset.lines)) preset.lines = [];\r\n            }\r\n        }\r\n\r\n        // Ensure only one preset is equipped\r\n        const equippedPresets = Object.values(this.data.innerAbility.presets)\r\n            .filter(p => p.isEquipped);\r\n\r\n        if (equippedPresets.length > 1) {\r\n            // Keep only the first equipped preset\r\n            equippedPresets.slice(1).forEach(p => p.isEquipped = false);\r\n            console.warn('GearLabStore: Multiple presets equipped, keeping only first');\r\n        }\r\n\r\n        // Validate cubePotential\r\n        if (!this.data.cubePotential) {\r\n            this.data.cubePotential = { ...defaults.cubePotential };\r\n        }\r\n\r\n        // Ensure all cube slots exist with valid data\r\n        const validSlots: CubeSlotId[] = ['helm', 'cape', 'chest', 'shoulder', 'legs', 'belt', 'gloves', 'boots', 'ring', 'necklace', 'eye-accessory'];\r\n        validSlots.forEach(slotId => {\r\n            if (!this.data.cubePotential[slotId]) {\r\n                this.data.cubePotential[slotId] = { ...defaults.cubePotential[slotId] };\r\n            } else {\r\n                // Validate slot data structure\r\n                const slot = this.data.cubePotential[slotId];\r\n                ['regular', 'bonus'].forEach((potentialType: PotentialType) => {\r\n                    if (!slot[potentialType]) {\r\n                        slot[potentialType] = { ...defaults.cubePotential[slotId][potentialType] };\r\n                    } else {\r\n                        const typeData = slot[potentialType];\r\n                        // Validate rarity\r\n                        if (!this.isValidRarity(typeData.rarity)) {\r\n                            typeData.rarity = 'normal';\r\n                        }\r\n                        // Validate rollCount\r\n                        if (typeof typeData.rollCount !== 'number') {\r\n                            typeData.rollCount = 0;\r\n                        }\r\n                        // Validate sets\r\n                        typeData.setA = this.validatePotentialSet(typeData.setA);\r\n                        typeData.setB = this.validatePotentialSet(typeData.setB);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Validate if a string is a valid Rarity\r\n     */\r\n    private isValidRarity(rarity: any): rarity is Rarity {\r\n        const validRarities: Rarity[] = ['normal', 'rare', 'epic', 'unique', 'legendary', 'mystic'];\r\n        return validRarities.includes(rarity);\r\n    }\r\n\r\n    // ========================================================================\r\n    // GETTERS - Return pre-hydrated data with safe defaults\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all inner ability presets\r\n     * @returns All 10 presets as a record\r\n     */\r\n    getInnerAbilityPresets(): Record<number, InnerAbilityPreset> {\r\n        return JSON.parse(JSON.stringify(this.data.innerAbility.presets));\r\n    }\r\n\r\n    /**\r\n     * Get a single preset\r\n     * @param id - Preset ID (1-10)\r\n     * @returns Preset data or null if not found\r\n     */\r\n    getPreset(id: number): InnerAbilityPreset | null {\r\n        const preset = this.data.innerAbility.presets[id];\r\n        return preset ? JSON.parse(JSON.stringify(preset)) : null;\r\n    }\r\n\r\n    /**\r\n     * Get the currently equipped preset ID\r\n     * @returns Equipped preset ID (1-10) or null if none equipped\r\n     */\r\n    getEquippedPresetId(): number | null {\r\n        const equipped = Object.values(this.data.innerAbility.presets)\r\n            .find(p => p.isEquipped);\r\n        return equipped ? equipped.id : null;\r\n    }\r\n\r\n    /**\r\n     * Get all data (for export/debugging)\r\n     * @returns Deep clone of gear lab data\r\n     */\r\n    getAllData(): GearLabData {\r\n        return JSON.parse(JSON.stringify(this.data));\r\n    }\r\n\r\n    // ========================================================================\r\n    // SETTERS - Partial updates with immediate save\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Update a preset\r\n     * @param id - Preset ID (1-10)\r\n     * @param data - Partial preset data to update\r\n     */\r\n    updatePreset(id: number, data: Partial<InnerAbilityPreset>): void {\r\n        if (id < 1 || id > 10) {\r\n            console.error(`GearLabStore: Invalid preset ID ${id}`);\r\n            return;\r\n        }\r\n\r\n        if (!this.data.innerAbility.presets[id]) {\r\n            this.data.innerAbility.presets[id] = {\r\n                id,\r\n                isEquipped: false,\r\n                lines: []\r\n            };\r\n        }\r\n\r\n        // Merge update with existing preset\r\n        this.data.innerAbility.presets[id] = {\r\n            ...this.data.innerAbility.presets[id],\r\n            ...data,\r\n            id  // Ensure id cannot be changed\r\n        };\r\n\r\n        // Ensure only one preset is equipped\r\n        if (data.isEquipped === true) {\r\n            for (let i = 1; i <= 10; i++) {\r\n                if (i !== id) {\r\n                    this.data.innerAbility.presets[i].isEquipped = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update a single line in a preset\r\n     * @param presetId - Preset ID (1-10)\r\n     * @param lineIndex - Line index (0-5)\r\n     * @param line - Line data\r\n     */\r\n    updatePresetLine(presetId: number, lineIndex: number, line: InnerAbilityLine): void {\r\n        if (presetId < 1 || presetId > 10) {\r\n            console.error(`GearLabStore: Invalid preset ID ${presetId}`);\r\n            return;\r\n        }\r\n\r\n        if (lineIndex < 0 || lineIndex > 5) {\r\n            console.error(`GearLabStore: Invalid line index ${lineIndex}`);\r\n            return;\r\n        }\r\n\r\n        const preset = this.data.innerAbility.presets[presetId];\r\n        if (!preset) {\r\n            console.error(`GearLabStore: Preset ${presetId} not found`);\r\n            return;\r\n        }\r\n\r\n        // Ensure lines array exists and has enough space\r\n        if (!preset.lines) {\r\n            preset.lines = [];\r\n        }\r\n\r\n        // Extend array if needed\r\n        while (preset.lines.length <= lineIndex) {\r\n            preset.lines.push({ stat: '', value: 0 });\r\n        }\r\n\r\n        preset.lines[lineIndex] = line;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set which preset is equipped\r\n     * @param id - Preset ID to equip (1-10), or null to unequip all\r\n     */\r\n    setEquippedPreset(id: number | null): void {\r\n        if (id !== null && (id < 1 || id > 10)) {\r\n            console.error(`GearLabStore: Invalid preset ID ${id}`);\r\n            return;\r\n        }\r\n\r\n        // Unequip all presets\r\n        for (let i = 1; i <= 10; i++) {\r\n            this.data.innerAbility.presets[i].isEquipped = false;\r\n        }\r\n\r\n        // Equip the specified preset\r\n        if (id !== null) {\r\n            this.data.innerAbility.presets[id].isEquipped = true;\r\n        }\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // CUBE POTENTIAL GETTERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all cube slot data\r\n     * @returns Deep clone of all cube slot data\r\n     */\r\n    getCubeSlotData(): AllCubeSlotData {\r\n        return JSON.parse(JSON.stringify(this.data.cubePotential));\r\n    }\r\n\r\n    /**\r\n     * Get data for a specific cube slot\r\n     * @param slotId - Equipment slot ID\r\n     * @returns Cube slot data or null if not found\r\n     */\r\n    getCubeSlot(slotId: CubeSlotId): CubeSlotData | null {\r\n        const slot = this.data.cubePotential[slotId];\r\n        return slot ? JSON.parse(JSON.stringify(slot)) : null;\r\n    }\r\n\r\n    // ========================================================================\r\n    // CUBE POTENTIAL SETTERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Update rarity for a slot's potential type\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param rarity - New rarity value\r\n     */\r\n    updateCubeRarity(slotId: CubeSlotId, potentialType: PotentialType, rarity: Rarity): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        this.data.cubePotential[slotId][potentialType].rarity = rarity;\r\n        // Reset roll count when rarity changes\r\n        this.data.cubePotential[slotId][potentialType].rollCount = 0;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update roll count for a slot's potential type\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param rollCount - New roll count value\r\n     */\r\n    updateCubeRollCount(slotId: CubeSlotId, potentialType: PotentialType, rollCount: number): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        this.data.cubePotential[slotId][potentialType].rollCount = rollCount;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update a potential line for a slot's potential type and set\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param setName - 'setA' or 'setB'\r\n     * @param lineNumber - Line number (1, 2, or 3)\r\n     * @param line - Line data\r\n     */\r\n    updateCubeLine(\r\n        slotId: CubeSlotId,\r\n        potentialType: PotentialType,\r\n        setName: 'setA' | 'setB',\r\n        lineNumber: 1 | 2 | 3,\r\n        line: PotentialLine\r\n    ): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        const lineKey = `line${lineNumber}` as keyof PotentialSet;\r\n        this.data.cubePotential[slotId][potentialType][setName][lineKey] = line;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update an entire potential set for a slot's potential type\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param setName - 'setA' or 'setB'\r\n     * @param set - Complete potential set\r\n     */\r\n    updateCubeSet(\r\n        slotId: CubeSlotId,\r\n        potentialType: PotentialType,\r\n        setName: 'setA' | 'setB',\r\n        set: PotentialSet\r\n    ): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        this.data.cubePotential[slotId][potentialType][setName] = set;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // PERSISTENCE\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Save to localStorage\r\n     */\r\n    private saveDualWrite(): void {\r\n        localStorage.setItem('gear-lab-data', JSON.stringify(this.data));\r\n    }\r\n\r\n    // ========================================================================\r\n    // TESTING/DEBUGGING HELPERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Reset store to defaults (for testing)\r\n     */\r\n    reset(): void {\r\n        this.data = JSON.parse(JSON.stringify(DEFAULT_GEAR_LAB_DATA));\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Check if store is initialized\r\n     */\r\n    isReady(): boolean {\r\n        return this.isInitialized;\r\n    }\r\n}\r\n\r\n// ========================================================================\r\n// SINGLETON EXPORT\r\n// ========================================================================\r\n\r\nexport const gearLabStore = new GearLabStore();\r\n"],
  "mappings": "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",
  "names": []
}
