{
  "version": 3,
  "sources": ["target-select.ts"],
  "sourcesContent": ["/**\r\n * Pure logic layer for Target/Stage selection\r\n * Data retrieval and filtering functions without DOM dependencies\r\n */\r\n\r\nimport { stageDefenses } from '@core/state/state';\r\nimport type { ContentType } from '@ts/types';\r\n\r\nexport type { ContentType };\r\n\r\n// ============================================================================\r\n// TYPE DEFINITIONS\r\n// ============================================================================\r\n\r\nexport interface StageEntry {\r\n    stage: string;\r\n    defense: number;\r\n    accuracy?: number;\r\n    chapter?: string;\r\n    boss?: string;\r\n}\r\n\r\nexport interface SavedContentTypeData {\r\n    contentType: ContentType | null;\r\n    subcategory: string | null;\r\n    selectedStage: string | null;\r\n}\r\n\r\n// ============================================================================\r\n// STAGE DATA RETRIEVAL\r\n// ============================================================================\r\n\r\nexport function getStageEntries(contentType: ContentType): StageEntry[] {\r\n    switch (contentType) {\r\n        case 'chapterBoss':\r\n            return stageDefenses.chapterBosses;\r\n        case 'worldBoss':\r\n            return stageDefenses.worldBosses;\r\n        case 'stageHunt':\r\n            return stageDefenses.stageHunts;\r\n        case 'growthDungeon':\r\n            return stageDefenses.growthDungeons;\r\n        default:\r\n            return [];\r\n    }\r\n}\r\n\r\nexport function filterStageHuntsByChapter(chapter: string): StageEntry[] {\r\n    return stageDefenses.stageHunts.filter(e => e.stage.startsWith(`${chapter}-`));\r\n}\r\n\r\nexport function filterGrowthDungeonsByType(dungeonType: string): StageEntry[] {\r\n    return stageDefenses.growthDungeons.filter(e => e.stage.startsWith(dungeonType));\r\n}\r\n\r\n// ============================================================================\r\n// DROPDOWN DATA GENERATION\r\n// ============================================================================\r\n\r\nexport function getSubcategoryOptions(contentType: ContentType): Array<{ value: string; label: string }> {\r\n    if (contentType === 'stageHunt') {\r\n        const options: Array<{ value: string; label: string }> = [];\r\n        for (let ch = 1; ch <= 28; ch++) {\r\n            options.push({\r\n                value: `chapter-${ch}`,\r\n                label: `Chapter ${ch}`\r\n            });\r\n        }\r\n        return options;\r\n    }\r\n\r\n    if (contentType === 'growthDungeon') {\r\n        const types = ['Weapon', 'EXP', 'Equipment', 'Enhancement', 'Hero Training Ground'];\r\n        return types.map(type => ({\r\n            value: type,\r\n            label: `${type} Stages`\r\n        }));\r\n    }\r\n\r\n    return [];\r\n}\r\n\r\nexport function getFilteredStageEntries(\r\n    contentType: ContentType,\r\n    filter: string\r\n): Array<{ entry: StageEntry; identifier: string; prefix: string }> {\r\n    let entries: StageEntry[] = [];\r\n    let prefix = '';\r\n\r\n    if (contentType === 'stageHunt') {\r\n        entries = filterStageHuntsByChapter(filter);\r\n        prefix = 'stageHunt';\r\n    } else if (contentType === 'growthDungeon') {\r\n        entries = filterGrowthDungeonsByType(filter);\r\n        prefix = 'growthDungeon';\r\n    } else if (contentType === 'chapterBoss') {\r\n        entries = getStageEntries('chapterBoss');\r\n        prefix = 'chapterBoss';\r\n    } else if (contentType === 'worldBoss') {\r\n        entries = getStageEntries('worldBoss');\r\n        prefix = 'worldBoss';\r\n    }\r\n\r\n    return entries.map(entry => ({\r\n        entry,\r\n        identifier: entry.stage || entry.chapter || entry.boss || '',\r\n        prefix\r\n    }));\r\n}\r\n\r\nexport function formatStageLabel(\r\n    entry: StageEntry,\r\n    identifier: string,\r\n    contentType: ContentType\r\n): string {\r\n    const accuracy = entry.accuracy ? `, Acc: ${entry.accuracy}` : '';\r\n    const defense = Math.floor(entry.defense * 100);\r\n\r\n    if (contentType === 'chapterBoss') {\r\n        return `Chapter ${identifier} (Def: ${defense}${accuracy})`;\r\n    }\r\n\r\n    if (contentType === 'worldBoss') {\r\n        return `${identifier} (Def: ${defense}${accuracy})`;\r\n    }\r\n\r\n    return `${identifier} (Def: ${defense}${accuracy})`;\r\n}\r\n\r\n// ============================================================================\r\n// CONTENT TYPE VALIDATION\r\n// ============================================================================\r\n\r\nexport function requiresSubcategory(contentType: ContentType): boolean {\r\n    return contentType === 'stageHunt' || contentType === 'growthDungeon';\r\n}\r\n\r\nexport function requiresStageSelection(contentType: ContentType): boolean {\r\n    return contentType === 'chapterBoss' ||\r\n           contentType === 'worldBoss' ||\r\n           contentType === 'stageHunt' ||\r\n           contentType === 'growthDungeon';\r\n}\r\n"],
  "mappings": "AAKA,SAAS,qBAAqB;AA2BvB,SAAS,gBAAgB,aAAwC;AACpE,UAAQ,aAAa;AAAA,IACjB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB;AACI,aAAO,CAAC;AAAA,EAChB;AACJ;AAEO,SAAS,0BAA0B,SAA+B;AACrE,SAAO,cAAc,WAAW,OAAO,OAAK,EAAE,MAAM,WAAW,GAAG,OAAO,GAAG,CAAC;AACjF;AAEO,SAAS,2BAA2B,aAAmC;AAC1E,SAAO,cAAc,eAAe,OAAO,OAAK,EAAE,MAAM,WAAW,WAAW,CAAC;AACnF;AAMO,SAAS,sBAAsB,aAAmE;AACrG,MAAI,gBAAgB,aAAa;AAC7B,UAAM,UAAmD,CAAC;AAC1D,aAAS,KAAK,GAAG,MAAM,IAAI,MAAM;AAC7B,cAAQ,KAAK;AAAA,QACT,OAAO,WAAW,EAAE;AAAA,QACpB,OAAO,WAAW,EAAE;AAAA,MACxB,CAAC;AAAA,IACL;AACA,WAAO;AAAA,EACX;AAEA,MAAI,gBAAgB,iBAAiB;AACjC,UAAM,QAAQ,CAAC,UAAU,OAAO,aAAa,eAAe,sBAAsB;AAClF,WAAO,MAAM,IAAI,WAAS;AAAA,MACtB,OAAO;AAAA,MACP,OAAO,GAAG,IAAI;AAAA,IAClB,EAAE;AAAA,EACN;AAEA,SAAO,CAAC;AACZ;AAEO,SAAS,wBACZ,aACA,QACgE;AAChE,MAAI,UAAwB,CAAC;AAC7B,MAAI,SAAS;AAEb,MAAI,gBAAgB,aAAa;AAC7B,cAAU,0BAA0B,MAAM;AAC1C,aAAS;AAAA,EACb,WAAW,gBAAgB,iBAAiB;AACxC,cAAU,2BAA2B,MAAM;AAC3C,aAAS;AAAA,EACb,WAAW,gBAAgB,eAAe;AACtC,cAAU,gBAAgB,aAAa;AACvC,aAAS;AAAA,EACb,WAAW,gBAAgB,aAAa;AACpC,cAAU,gBAAgB,WAAW;AACrC,aAAS;AAAA,EACb;AAEA,SAAO,QAAQ,IAAI,YAAU;AAAA,IACzB;AAAA,IACA,YAAY,MAAM,SAAS,MAAM,WAAW,MAAM,QAAQ;AAAA,IAC1D;AAAA,EACJ,EAAE;AACN;AAEO,SAAS,iBACZ,OACA,YACA,aACM;AACN,QAAM,WAAW,MAAM,WAAW,UAAU,MAAM,QAAQ,KAAK;AAC/D,QAAM,UAAU,KAAK,MAAM,MAAM,UAAU,GAAG;AAE9C,MAAI,gBAAgB,eAAe;AAC/B,WAAO,WAAW,UAAU,UAAU,OAAO,GAAG,QAAQ;AAAA,EAC5D;AAEA,MAAI,gBAAgB,aAAa;AAC7B,WAAO,GAAG,UAAU,UAAU,OAAO,GAAG,QAAQ;AAAA,EACpD;AAEA,SAAO,GAAG,UAAU,UAAU,OAAO,GAAG,QAAQ;AACpD;AAMO,SAAS,oBAAoB,aAAmC;AACnE,SAAO,gBAAgB,eAAe,gBAAgB;AAC1D;AAEO,SAAS,uBAAuB,aAAmC;AACtE,SAAO,gBAAgB,iBAChB,gBAAgB,eAChB,gBAAgB,eAChB,gBAAgB;AAC3B;",
  "names": []
}
