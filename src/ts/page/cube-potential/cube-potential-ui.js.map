{
  "version": 3,
  "sources": ["cube-potential-ui.ts"],
  "sourcesContent": ["/**\r\n * Cube Potential UI\r\n * HTML generation and event handlers for the cube potential tab\r\n */\r\n\r\nimport {\r\n    currentCubeSlot,\r\n    currentPotentialType,\r\n    rankingsCache,\r\n    rankingsInProgress,\r\n    switchPotentialType,\r\n    selectCubeSlot,\r\n    clearCubeRankingsCache,\r\n    getRarityColor,\r\n    calculateComparison,\r\n    getPercentileForGain,\r\n    initializeCubePotential\r\n} from '@ts/page/cube-potential/cube-potential.js';\r\nimport { gearLabStore } from '@ts/store/gear-lab-store.js';\r\nimport {\r\n    SLOT_NAMES,\r\n    SLOT_SPECIFIC_POTENTIALS,\r\n    EQUIPMENT_POTENTIAL_DATA,\r\n    RANKINGS_PER_PAGE\r\n} from '@ts/page/cube-potential/cube-potential-data.js';\r\nimport type {\r\n    CubeSlotId,\r\n    PotentialType,\r\n    Rarity,\r\n    PotentialLine,\r\n    PotentialLineEntry,\r\n    PotentialSet\r\n} from '@ts/types/page/gear-lab/gear-lab.types';\r\nimport { StatCalculationService } from '@ts/services/stat-calculation-service.js';\r\nimport { lineExistsInRarity, calculateSlotSetGain } from '@ts/page/cube-potential/cube-potential.js';\r\nimport { loadoutStore } from '@ts/store/loadout.store';\r\n\r\n// ============================================================================\r\n// STATE\r\n// ============================================================================\r\n\r\n/**\r\n * Current page for rankings pagination\r\n */\r\nlet currentRankingsPage = 1;\r\n\r\n/**\r\n * Summary sort column and direction\r\n */\r\nlet summarySortColumn: 'regular' | 'bonus' = 'regular';\r\nlet summarySortDescending = true;\r\n\r\n// ============================================================================\r\n// HTML GENERATION\r\n// ============================================================================\r\n\r\n/**\r\n * Generate the complete HTML for the cube potential tab\r\n */\r\nexport function generateCubePotentialHTML(): string {\r\n    return `\r\n        <!-- Class Warning Banner -->\r\n        <div id=\"cube-class-warning\" class=\"optimization-info-banner optimization-info-banner--warning\" style=\"display: none;\">\r\n            <span class=\"optimization-info-banner-icon\">\u26A0\uFE0F</span>\r\n            <div>\r\n                <div style=\"font-weight: 700; font-size: 1em; margin-bottom: 4px;\">No Class Selected</div>\r\n                <div style=\"color: var(--text-secondary); font-size: 0.9em;\">Please select your class in the Hero Power section above to use the Cube Potential calculator. Class selection is needed to properly calculate stat damage gains.</div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Flattened Main Tab Navigation -->\r\n        <div id=\"tab-container-main\" class=\"cube-main-tabs\">\r\n            <button id=\"cube-main-tab-comparison\" class=\"tab-button active\" data-tab=\"comparison\">\r\n                <span class=\"cube-tab-label\">Comparison</span>\r\n            </button>\r\n            <button id=\"cube-main-tab-rankings\" class=\"tab-button\" data-tab=\"rankings\">\r\n                <span class=\"cube-tab-label\">Best Potentials</span>\r\n            </button>\r\n            <button id=\"cube-main-tab-summary\" class=\"tab-button\" data-tab=\"summary\">\r\n                <span class=\"cube-tab-label\">All Slots Summary</span>\r\n            </button>\r\n            <button id=\"cube-main-tab-simulation\" class=\"tab-button\" data-tab=\"simulation\">\r\n                <span class=\"cube-tab-label\">Simulation</span>\r\n            </button>\r\n            <button id=\"cube-main-tab-optimal\" class=\"tab-button\" data-tab=\"optimal\">\r\n                <span class=\"cube-tab-label\">Optimal Strategy</span>\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Comparison Tab Content -->\r\n        <div id=\"cube-comparison-content\" class=\"cube-tab-content active\">\r\n            ${generateComparisonTabHTML()}\r\n        </div>\r\n\r\n        <!-- Best Potentials Tab Content -->\r\n        <div id=\"cube-rankings-content\" class=\"cube-tab-content\">\r\n            ${generateRankingsTabHTML()}\r\n        </div>\r\n\r\n        <!-- All Slots Summary Tab Content -->\r\n        <div id=\"cube-summary-content\" class=\"cube-tab-content\">\r\n            ${generateSummaryTabHTML()}\r\n        </div>\r\n\r\n        <!-- Simulation Tab Content -->\r\n        <div id=\"cube-simulation-content\" class=\"cube-tab-content\">\r\n            ${generateSimulationTabHTML()}\r\n        </div>\r\n\r\n        <!-- Optimal Strategy Tab Content -->\r\n        <div id=\"cube-optimal-content\" class=\"cube-tab-content\">\r\n            ${generateOptimalTabHTML()}\r\n        </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Generate HTML for the Comparison tab\r\n */\r\nfunction generateComparisonTabHTML(): string {\r\n    return `\r\n        <!-- Equipment Slot Selector -->\r\n        <div class=\"cube-slot-selector-wrapper\">\r\n            <label for=\"cube-slot-selector\" class=\"cube-slot-label\">Equipment Slot</label>\r\n            <div id=\"cube-slot-selector\" class=\"cube-slot-buttons-container\"></div>\r\n        </div>\r\n\r\n        <!-- Context Controls for Comparison Tab (Potential Type & Rarity) -->\r\n        <div id=\"cube-comparison-controls\" class=\"cube-context-controls\" style=\"display: block;\">\r\n            <div class=\"cube-controls-grid\">\r\n                <!-- Potential Type Toggle -->\r\n                <div class=\"cube-control-group\">\r\n                    <label class=\"cube-control-label\">Potential Type</label>\r\n                    <div class=\"cube-potential-type-buttons\">\r\n                        <button id=\"cube-regular-potential-btn\" class=\"cube-potential-type-btn active\">\r\n                            <span class=\"cube-type-icon\">\u2726</span>\r\n                            <span>Regular</span>\r\n                        </button>\r\n                        <button id=\"cube-bonus-potential-btn\" class=\"cube-potential-type-btn\">\r\n                            <span class=\"cube-type-icon\">\u2727</span>\r\n                            <span>Bonus</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Rarity Selector -->\r\n                <div class=\"cube-rarity-row\">\r\n                    <div class=\"cube-control-group\">\r\n                        <label for=\"cube-rarity-selector\" class=\"cube-control-label\">Slot Rarity</label>\r\n                        <select id=\"cube-rarity-selector\" class=\"cube-rarity-select\">\r\n                            <option value=\"normal\">Normal</option>\r\n                            <option value=\"rare\">Rare</option>\r\n                            <option value=\"epic\">Epic</option>\r\n                            <option value=\"unique\">Unique</option>\r\n                            <option value=\"legendary\">Legendary</option>\r\n                            <option value=\"mystic\">Mystic</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"cube-roll-count-container\">\r\n                        <label for=\"cube-roll-count\" style=\"font-size: 0.85em; color: var(--text-secondary);\">\r\n                            Rolls at current rarity\r\n                        </label>\r\n                        <input type=\"number\" id=\"cube-roll-count\" min=\"0\" max=\"999\" value=\"0\"\r\n                               style=\"width: 80px; padding: 8px 12px; border-radius: 8px;\r\n                                      border: 1px solid var(--border-color); background: var(--bg-secondary);\r\n                                      color: var(--text-primary); font-size: 0.95em;\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"cube-comparison-grid\">\r\n            <!-- Set A (Current) Card -->\r\n            <div class=\"cube-set-card cube-set-card--a\">\r\n                <div class=\"cube-set-card-header\">\r\n                    <h3 class=\"cube-set-card-title\">Set A (Current)</h3>\r\n                    <span class=\"cube-set-card-subtitle\">Your configured potential</span>\r\n                </div>\r\n\r\n                <div class=\"cube-set-card-body\">\r\n                    <div class=\"cube-line-input-group\">\r\n                        <label class=\"cube-line-label\" for=\"cube-setA-line1-stat\">Line 1</label>\r\n                        <select id=\"cube-setA-line1-stat\" class=\"cube-line-select\"></select>\r\n                    </div>\r\n\r\n                    <div class=\"cube-line-input-group\">\r\n                        <label class=\"cube-line-label\" for=\"cube-setA-line2-stat\">Line 2</label>\r\n                        <select id=\"cube-setA-line2-stat\" class=\"cube-line-select\"></select>\r\n                    </div>\r\n\r\n                    <div class=\"cube-line-input-group\">\r\n                        <label class=\"cube-line-label\" for=\"cube-setA-line3-stat\">Line 3</label>\r\n                        <select id=\"cube-setA-line3-stat\" class=\"cube-line-select\"></select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Set B (Comparison) Card -->\r\n            <div class=\"cube-set-card cube-set-card--b\">\r\n                <div class=\"cube-set-card-header\">\r\n                    <h3 class=\"cube-set-card-title\">Set B (Comparison)</h3>\r\n                    <span class=\"cube-set-card-subtitle\">Test alternative potential</span>\r\n                </div>\r\n\r\n                <div class=\"cube-set-card-body\">\r\n                    <div class=\"cube-line-input-group\">\r\n                        <label class=\"cube-line-label\" for=\"cube-setB-line1-stat\">Line 1</label>\r\n                        <select id=\"cube-setB-line1-stat\" class=\"cube-line-select\"></select>\r\n                    </div>\r\n\r\n                    <div class=\"cube-line-input-group\">\r\n                        <label class=\"cube-line-label\" for=\"cube-setB-line2-stat\">Line 2</label>\r\n                        <select id=\"cube-setB-line2-stat\" class=\"cube-line-select\"></select>\r\n                    </div>\r\n\r\n                    <div class=\"cube-line-input-group\">\r\n                        <label class=\"cube-line-label\" for=\"cube-setB-line3-stat\">Line 3</label>\r\n                        <select id=\"cube-setB-line3-stat\" class=\"cube-line-select\"></select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Comparison Results -->\r\n        <div id=\"cube-comparison-results\" class=\"cube-results-section\"></div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Generate HTML for the Rankings tab\r\n */\r\nfunction generateRankingsTabHTML(): string {\r\n    return `\r\n        <!-- Controls for Rankings (Independent slot & rarity selectors) -->\r\n        <div id=\"cube-rankings-controls\" class=\"cube-context-controls\" style=\"display: block;\">\r\n            <div class=\"cube-controls-grid\">\r\n                <!-- Slot Selector -->\r\n                <div class=\"cube-control-group\">\r\n                    <label for=\"cube-rankings-slot-selector\" class=\"cube-control-label\">Equipment Slot</label>\r\n                    <select id=\"cube-rankings-slot-selector\" class=\"cube-rarity-select\">\r\n                        <!-- Populated by JavaScript -->\r\n                    </select>\r\n                    <p style=\"font-size: 0.85em; color: var(--text-secondary); margin-top: var(--cube-space-sm);\">\r\n                        Some slots have unique potential lines available only to them\r\n                    </p>\r\n                </div>\r\n\r\n                <!-- Rarity Selector -->\r\n                <div class=\"cube-control-group\">\r\n                    <label for=\"cube-rankings-rarity-selector\" class=\"cube-control-label\">Rarity Tier</label>\r\n                    <select id=\"cube-rankings-rarity-selector\" class=\"cube-rarity-select\">\r\n                        <option value=\"normal\">Normal</option>\r\n                        <option value=\"rare\">Rare</option>\r\n                        <option value=\"epic\" selected>Epic</option>\r\n                        <option value=\"unique\">Unique</option>\r\n                        <option value=\"legendary\">Legendary</option>\r\n                        <option value=\"mystic\">Mystic</option>\r\n                    </select>\r\n                    <p style=\"font-size: 0.85em; color: var(--text-secondary); margin-top: var(--cube-space-sm);\">\r\n                        View best combinations for this rarity (independent of saved config)\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Progress Bar -->\r\n        <div id=\"cube-rankings-progress\" class=\"cube-progress-bar\" style=\"display: none;\">\r\n            <div class=\"cube-progress-track\">\r\n                <div id=\"cube-rankings-progress-fill\" class=\"cube-progress-fill\"></div>\r\n            </div>\r\n            <p id=\"cube-rankings-progress-text\" class=\"cube-progress-text\">Calculating best combinations...</p>\r\n        </div>\r\n\r\n        <!-- Rankings Results -->\r\n        <div id=\"cube-rankings-results\" class=\"cube-rankings-results\"></div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Generate HTML for the Summary tab\r\n */\r\nfunction generateSummaryTabHTML(): string {\r\n    return `\r\n        <div class=\"cube-summary-header\">\r\n            <h3 class=\"cube-summary-title\">All Slots Potential Summary</h3>\r\n            <p class=\"cube-summary-description\">Overview of Set A DPS gains for all equipment slots (Regular and Bonus Potential)</p>\r\n        </div>\r\n\r\n        <!-- Loading Progress -->\r\n        <div id=\"cube-summary-progress\" class=\"cube-progress-bar\" style=\"display: none;\">\r\n            <div class=\"cube-progress-track\">\r\n                <div id=\"cube-summary-progress-fill\" class=\"cube-progress-fill\"></div>\r\n            </div>\r\n            <p id=\"cube-summary-progress-text\" class=\"cube-progress-text\">Loading rankings across all slots...</p>\r\n        </div>\r\n\r\n        <div id=\"cube-summary-results\" class=\"cube-summary-results\"></div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Generate HTML for the Simulation tab\r\n */\r\nfunction generateSimulationTabHTML(): string {\r\n    return `\r\n        <div class=\"cube-simulation-header\">\r\n            <h3 class=\"cube-simulation-title\">Cube Strategy Simulation</h3>\r\n            <p class=\"cube-simulation-description\">Compare different cubing strategies to find the most efficient approach</p>\r\n        </div>\r\n\r\n        <div id=\"cube-simulation-results\" class=\"cube-simulation-results\"></div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Generate HTML for the Optimal Strategy tab\r\n */\r\nfunction generateOptimalTabHTML(): string {\r\n    return `\r\n        <div class=\"cube-optimal-header\">\r\n            <h3 class=\"cube-optimal-title\">Optimal Strategy Guidance</h3>\r\n            <p class=\"cube-optimal-description\">Get recommendations on which slots to cube first for maximum DPS gain</p>\r\n        </div>\r\n\r\n        <div id=\"cube-optimal-content-inner\" class=\"cube-optimal-content-inner\"></div>\r\n    `;\r\n}\r\n\r\n// ============================================================================\r\n// INITIALIZATION\r\n// ============================================================================\r\n\r\n/**\r\n * Initialize the cube potential UI\r\n */\r\nexport async function initializeCubePotentialUI(): Promise<void> {\r\n    const container = document.getElementById('optimization-cube-potential');\r\n    if (!container) {\r\n        console.error('Cube potential container not found');\r\n        return;\r\n    }\r\n\r\n    // Generate HTML\r\n    container.innerHTML = generateCubePotentialHTML();\r\n\r\n    // Initialize core system\r\n    await initializeCubePotential();\r\n\r\n    // Setup UI components\r\n    setupSlotSelector();\r\n    setupPotentialTypeButtons();\r\n    setupRaritySelector();\r\n    setupRollCountInput();\r\n    setupPotentialLineDropdowns();\r\n    setupTabNavigation();\r\n    setupRankingsControls();\r\n\r\n    // Load data from store\r\n    loadCubeDataFromStore();\r\n\r\n    // Initial UI update\r\n    updateSlotButtonColors();\r\n    updateCubePotentialUI();\r\n    updateClassWarning();\r\n\r\n    // Expose global functions\r\n    exposeGlobalFunctions();\r\n}\r\n\r\n/**\r\n * Load cube data from store and update UI\r\n */\r\nfunction loadCubeDataFromStore(): void {\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    // Update rarity selector\r\n    const raritySelector = document.getElementById('cube-rarity-selector') as HTMLSelectElement;\r\n    if (raritySelector) {\r\n        raritySelector.value = cubeData[currentCubeSlot][currentPotentialType].rarity;\r\n    }\r\n\r\n    // Update roll count input\r\n    const rollCountInput = document.getElementById('cube-roll-count') as HTMLInputElement;\r\n    if (rollCountInput) {\r\n        rollCountInput.value = cubeData[currentCubeSlot][currentPotentialType].rollCount.toString();\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// UI SETUP FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Setup equipment slot selector buttons\r\n */\r\nfunction setupSlotSelector(): void {\r\n    const slotSelector = document.getElementById('cube-slot-selector');\r\n    if (!slotSelector) return;\r\n\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    slotSelector.innerHTML = '';\r\n\r\n    SLOT_NAMES.forEach(slot => {\r\n        const slotBtn = document.createElement('button');\r\n        slotBtn.className = 'cube-slot-btn';\r\n        slotBtn.textContent = slot.name;\r\n        slotBtn.dataset.slot = slot.id;\r\n\r\n        // Apply rarity color to border\r\n        const slotRarity = cubeData[slot.id]?.[currentPotentialType]?.rarity || 'normal';\r\n        const rarityColor = getRarityColor(slotRarity);\r\n        slotBtn.style.borderColor = rarityColor;\r\n\r\n        // Apply active state\r\n        const isActive = slot.id === currentCubeSlot;\r\n        if (isActive) {\r\n            slotBtn.classList.add('active');\r\n            slotBtn.style.boxShadow = `0 4px 16px ${rarityColor}60, 0 0 0 2px ${rarityColor}`;\r\n        } else {\r\n            slotBtn.style.boxShadow = `0 2px 8px ${rarityColor}40`;\r\n        }\r\n\r\n        slotBtn.addEventListener('click', () => {\r\n            selectCubeSlot(slot.id);\r\n            updateSlotButtonColors();\r\n            loadCubeDataFromStore();\r\n            updateCubePotentialUI();\r\n            calculateComparisonAndDisplay();\r\n        });\r\n\r\n        slotSelector.appendChild(slotBtn);\r\n    });\r\n}\r\n\r\n/**\r\n * Setup potential type toggle buttons\r\n */\r\nfunction setupPotentialTypeButtons(): void {\r\n    const regularBtn = document.getElementById('cube-regular-potential-btn');\r\n    const bonusBtn = document.getElementById('cube-bonus-potential-btn');\r\n\r\n    if (regularBtn && bonusBtn) {\r\n        regularBtn.addEventListener('click', () => {\r\n            switchPotentialType('regular');\r\n            updatePotentialTypeButtons();\r\n            loadCubeDataFromStore();\r\n            updateSlotButtonColors();\r\n            updateCubePotentialUI();\r\n            calculateComparisonAndDisplay();\r\n        });\r\n\r\n        bonusBtn.addEventListener('click', () => {\r\n            switchPotentialType('bonus');\r\n            updatePotentialTypeButtons();\r\n            loadCubeDataFromStore();\r\n            updateSlotButtonColors();\r\n            updateCubePotentialUI();\r\n            calculateComparisonAndDisplay();\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Setup rarity selector\r\n */\r\nfunction setupRaritySelector(): void {\r\n    const raritySelector = document.getElementById('cube-rarity-selector') as HTMLSelectElement;\r\n    if (!raritySelector) return;\r\n\r\n    raritySelector.addEventListener('change', (e) => {\r\n        const target = e.target as HTMLSelectElement;\r\n        const newRarity = target.value as Rarity;\r\n        gearLabStore.updateCubeRarity(currentCubeSlot, currentPotentialType, newRarity);\r\n\r\n        updateSlotButtonColors();\r\n        updateCubePotentialUI();\r\n        calculateComparisonAndDisplay();\r\n    });\r\n}\r\n\r\n/**\r\n * Setup roll count input\r\n */\r\nfunction setupRollCountInput(): void {\r\n    const rollCountInput = document.getElementById('cube-roll-count') as HTMLInputElement;\r\n    if (!rollCountInput) return;\r\n\r\n    rollCountInput.addEventListener('change', (e) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const value = parseInt(target.value) || 0;\r\n        gearLabStore.updateCubeRollCount(currentCubeSlot, currentPotentialType, value);\r\n    });\r\n}\r\n\r\n/**\r\n * Setup potential line dropdowns\r\n */\r\nfunction setupPotentialLineDropdowns(): void {\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    const rarity = cubeData[currentCubeSlot][currentPotentialType].rarity;\r\n\r\n    // Setup Set A dropdowns\r\n    updatePotentialLineDropdowns('setA', rarity);\r\n\r\n    // Setup Set B dropdowns\r\n    updatePotentialLineDropdowns('setB', rarity);\r\n}\r\n\r\n/**\r\n * Setup tab navigation\r\n */\r\nfunction setupTabNavigation(): void {\r\n    const tabs = document.querySelectorAll('.cube-main-tabs .tab-button');\r\n    const contents = document.querySelectorAll('.cube-tab-content');\r\n\r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click', () => {\r\n            const tabName = tab.getAttribute('data-tab');\r\n            if (!tabName) return;\r\n\r\n            // Update active states\r\n            tabs.forEach(t => t.classList.remove('active'));\r\n            contents.forEach(c => c.classList.remove('active'));\r\n\r\n            tab.classList.add('active');\r\n            const targetContent = document.getElementById(`cube-${tabName}-content`);\r\n            if (targetContent) {\r\n                targetContent.classList.add('active');\r\n            }\r\n\r\n            // Handle tab-specific initialization\r\n            if (tabName === 'summary') {\r\n                displayAllSlotsSummary();\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Setup rankings controls\r\n */\r\nfunction setupRankingsControls(): void {\r\n    const slotSelector = document.getElementById('cube-rankings-slot-selector') as HTMLSelectElement;\r\n    const raritySelector = document.getElementById('cube-rankings-rarity-selector') as HTMLSelectElement;\r\n\r\n    if (!slotSelector || !raritySelector) return;\r\n\r\n    // Populate slot selector\r\n    SLOT_NAMES.forEach(slot => {\r\n        const option = document.createElement('option');\r\n        option.value = slot.id;\r\n        option.textContent = slot.name;\r\n        slotSelector.appendChild(option);\r\n    });\r\n\r\n    // Set default to current slot\r\n    slotSelector.value = currentCubeSlot;\r\n\r\n    // Add event listeners\r\n    slotSelector.addEventListener('change', () => {\r\n        currentRankingsPage = 1;\r\n        // Rankings will be calculated on demand when tab is visible\r\n    });\r\n\r\n    raritySelector.addEventListener('change', () => {\r\n        currentRankingsPage = 1;\r\n        // Rankings will be calculated on demand when tab is visible\r\n    });\r\n}\r\n\r\n// ============================================================================\r\n// UI UPDATE FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Update slot button colors based on rarity\r\n */\r\nexport function updateSlotButtonColors(): void {\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    SLOT_NAMES.forEach(slot => {\r\n        const slotBtn = document.querySelector(`.cube-slot-btn[data-slot=\"${slot.id}\"]`) as HTMLElement;\r\n        if (!slotBtn) return;\r\n\r\n        const slotRarity = cubeData[slot.id]?.[currentPotentialType]?.rarity || 'normal';\r\n        const rarityColor = getRarityColor(slotRarity);\r\n        slotBtn.style.borderColor = rarityColor;\r\n\r\n        const isActive = slot.id === currentCubeSlot;\r\n        if (isActive) {\r\n            slotBtn.style.boxShadow = `0 4px 16px ${rarityColor}60, 0 0 0 2px ${rarityColor}`;\r\n        } else {\r\n            slotBtn.style.boxShadow = `0 2px 8px ${rarityColor}40`;\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Update potential type button states\r\n */\r\nfunction updatePotentialTypeButtons(): void {\r\n    const regularBtn = document.getElementById('cube-regular-potential-btn');\r\n    const bonusBtn = document.getElementById('cube-bonus-potential-btn');\r\n\r\n    if (regularBtn && bonusBtn) {\r\n        regularBtn.classList.toggle('active', currentPotentialType === 'regular');\r\n        bonusBtn.classList.toggle('active', currentPotentialType === 'bonus');\r\n    }\r\n}\r\n\r\n/**\r\n * Update potential line dropdowns for a set\r\n */\r\nfunction updatePotentialLineDropdowns(setName: 'setA' | 'setB', rarity: Rarity): void {\r\n    const potentialData = EQUIPMENT_POTENTIAL_DATA[rarity];\r\n    if (!potentialData) return;\r\n\r\n    for (let lineNum = 1; lineNum <= 3; lineNum++) {\r\n        const statSelect = document.getElementById(`cube-${setName}-line${lineNum}-stat`) as HTMLSelectElement;\r\n        if (!statSelect) continue;\r\n\r\n        // Clear existing options\r\n        statSelect.innerHTML = '<option value=\"\">-- Select Stat --</option>';\r\n\r\n        // Get available stats for this line\r\n        const lineKey = `line${lineNum}` as 'line1' | 'line2' | 'line3';\r\n        let lineData: PotentialLineEntry[] = [...(potentialData[lineKey] || [])];\r\n\r\n        // Add slot-specific lines if available\r\n        if (SLOT_SPECIFIC_POTENTIALS[currentCubeSlot] && SLOT_SPECIFIC_POTENTIALS[currentCubeSlot][rarity]) {\r\n            const slotSpecificLines = SLOT_SPECIFIC_POTENTIALS[currentCubeSlot][rarity][lineKey as keyof typeof SLOT_SPECIFIC_POTENTIALS[CubeSlotId][Rarity]];\r\n            if (slotSpecificLines) {\r\n                lineData = [...slotSpecificLines, ...lineData];\r\n            }\r\n        }\r\n\r\n        if (!lineData || lineData.length === 0) continue;\r\n\r\n        // Build unique stat list with values\r\n        const statOptions = new Map<string, { text: string; stat: string; value: number; prime: boolean }>();\r\n\r\n        lineData.forEach(entry => {\r\n            const isPercentStat = entry.stat.includes('%');\r\n            const valueSuffix = isPercentStat ? '%' : '';\r\n            const displayText = entry.prime\r\n                ? `${entry.stat} - ${entry.value}${valueSuffix} (Prime)`\r\n                : `${entry.stat} - ${entry.value}${valueSuffix}`;\r\n\r\n            const key = `${entry.stat}|${entry.value}|${entry.prime}`;\r\n            statOptions.set(key, {\r\n                text: displayText,\r\n                stat: entry.stat,\r\n                value: entry.value,\r\n                prime: entry.prime\r\n            });\r\n        });\r\n\r\n        // Add options to dropdown\r\n        statOptions.forEach((opt, key) => {\r\n            const option = document.createElement('option');\r\n            option.value = key;\r\n            option.textContent = opt.text;\r\n            option.dataset.stat = opt.stat;\r\n            option.dataset.value = opt.value.toString();\r\n            option.dataset.prime = opt.prime.toString();\r\n            statSelect.appendChild(option);\r\n        });\r\n\r\n        // Add change listener\r\n        statSelect.addEventListener('change', (e) => {\r\n            const selectedOption = statSelect.selectedOptions[0];\r\n            if (selectedOption && selectedOption.dataset.value) {\r\n                const [stat, value, prime] = (e.target as HTMLSelectElement).value.split('|');\r\n                gearLabStore.updateCubeLine(\r\n                    currentCubeSlot,\r\n                    currentPotentialType,\r\n                    setName,\r\n                    lineNum as 1 | 2 | 3,\r\n                    { stat, value: parseFloat(value), prime: prime === 'true' }\r\n                );\r\n            } else {\r\n                gearLabStore.updateCubeLine(\r\n                    currentCubeSlot,\r\n                    currentPotentialType,\r\n                    setName,\r\n                    lineNum as 1 | 2 | 3,\r\n                    { stat: '', value: 0, prime: false }\r\n                );\r\n            }\r\n\r\n            calculateComparisonAndDisplay();\r\n        });\r\n    }\r\n\r\n    // Restore saved values\r\n    restorePotentialLineValues(setName);\r\n}\r\n\r\n/**\r\n * Restore saved values to potential line dropdowns\r\n */\r\nfunction restorePotentialLineValues(setName: 'setA' | 'setB'): void {\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    const setData = cubeData[currentCubeSlot][currentPotentialType][setName];\r\n\r\n    for (let lineNum = 1; lineNum <= 3; lineNum++) {\r\n        const lineKey = `line${lineNum}` as 'line1' | 'line2' | 'line3';\r\n        const line = setData[lineKey];\r\n        const statSelect = document.getElementById(`cube-${setName}-line${lineNum}-stat`) as HTMLSelectElement;\r\n\r\n        if (!statSelect) continue;\r\n\r\n        if (!line || !line.stat) {\r\n            statSelect.value = '';\r\n            continue;\r\n        }\r\n\r\n        // Find matching option\r\n        const key = `${line.stat}|${line.value}|${line.prime}`;\r\n        const option = Array.from(statSelect.options).find(opt => opt.value === key);\r\n\r\n        if (option) {\r\n            statSelect.value = key;\r\n        } else {\r\n            statSelect.value = '';\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Update cube potential UI\r\n */\r\nexport function updateCubePotentialUI(): void {\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    const rarity = cubeData[currentCubeSlot][currentPotentialType].rarity;\r\n\r\n    // Update dropdowns for Set A and Set B\r\n    updatePotentialLineDropdowns('setA', rarity);\r\n    updatePotentialLineDropdowns('setB', rarity);\r\n\r\n    // Calculate and display comparison\r\n    calculateComparisonAndDisplay();\r\n}\r\n\r\n/**\r\n * Update class warning banner\r\n */\r\nexport function updateClassWarning(): void {\r\n    const warningBanner = document.getElementById('cube-class-warning');\r\n    if (!warningBanner) return;\r\n\r\n    if (!loadoutStore.getSelectedClass()) {\r\n        warningBanner.style.display = 'block';\r\n    } else {\r\n        warningBanner.style.display = 'none';\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// COMPARISON DISPLAY\r\n// ============================================================================\r\n\r\n/**\r\n * Calculate comparison and display results\r\n */\r\nfunction calculateComparisonAndDisplay(): void {\r\n    if (!loadoutStore.getSelectedClass()) {\r\n        updateClassWarning();\r\n        return;\r\n    }\r\n\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    const result = calculateComparison(cubeData, currentCubeSlot, currentPotentialType);\r\n    if (!result) return;\r\n\r\n    displayComparisonResults(result);\r\n}\r\n\r\n/**\r\n * Display comparison results\r\n */\r\nfunction displayComparisonResults(result: {\r\n    setAGain: number;\r\n    setBGain: number;\r\n    setBAbsoluteGain: number;\r\n    deltaGain: number;\r\n    setAStats: any;\r\n    setBStats: any;\r\n}): void {\r\n    const resultsDiv = document.getElementById('cube-comparison-results');\r\n    if (!resultsDiv) return;\r\n\r\n    const { setAGain, setBGain, setBAbsoluteGain } = result;\r\n\r\n    resultsDiv.innerHTML = `\r\n        <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;\">\r\n            <div style=\"background: linear-gradient(135deg, rgba(52, 199, 89, 0.1), rgba(0, 122, 255, 0.05)); border: 2px solid var(--accent-success); border-radius: 12px; padding: 20px; box-shadow: 0 4px 16px var(--shadow); text-align: center;\">\r\n                <div style=\"font-size: 0.9em; color: var(--text-secondary); margin-bottom: 8px;\">Set A Gain<br><span style=\"font-size: 0.85em;\">(vs Baseline)</span></div>\r\n                <div style=\"font-size: 1.8em; font-weight: 700; color: ${setAGain >= 0 ? '#4ade80' : '#f87171'};\">\r\n                    ${setAGain >= 0 ? '+' : ''}${setAGain.toFixed(2)}%\r\n                </div>\r\n            </div>\r\n            <div style=\"background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.05)); border: 2px solid #3b82f6; border-radius: 12px; padding: 20px; box-shadow: 0 4px 16px var(--shadow); text-align: center;\">\r\n                <div style=\"font-size: 0.9em; color: var(--text-secondary); margin-bottom: 8px;\">Set B Gain<br><span style=\"font-size: 0.85em;\">(vs Set A)</span></div>\r\n                <div style=\"font-size: 1.8em; font-weight: 700; color: ${setBGain >= 0 ? '#4ade80' : '#f87171'};\">\r\n                    ${setBGain >= 0 ? '+' : ''}${setBGain.toFixed(2)}%\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\n// ============================================================================\r\n// SUMMARY DISPLAY\r\n// ============================================================================\r\n\r\n/**\r\n * Display summary of all slots\r\n */\r\nfunction displayAllSlotsSummary(): void {\r\n    const resultsDiv = document.getElementById('cube-summary-results');\r\n    if (!resultsDiv) return;\r\n\r\n    if (!loadoutStore.getSelectedClass()) {\r\n        resultsDiv.innerHTML = '<p style=\"text-align: center; color: var(--text-secondary);\">Please select a class to view summary.</p>';\r\n        return;\r\n    }\r\n\r\n    const cubeData = gearLabStore.getCubeSlotData();\r\n    if (!cubeData) return;\r\n\r\n    const currentStats = loadoutStore.getBaseStats();\r\n\r\n    // Calculate DPS gain for each slot + potential type\r\n    const summaryData: Array<{\r\n        slotId: CubeSlotId;\r\n        slotName: string;\r\n        regularGain: number;\r\n        regularRarity: Rarity;\r\n        bonusGain: number;\r\n        bonusRarity: Rarity;\r\n    }> = [];\r\n\r\n    SLOT_NAMES.forEach(slot => {\r\n        // Regular Potential\r\n        const regularData = cubeData[slot.id].regular;\r\n        const regularResult = calculateSlotSetGain(slot.id, regularData.rarity, regularData.setA, currentStats);\r\n        const regularGain = regularResult.gain;\r\n\r\n        // Bonus Potential\r\n        const bonusData = cubeData[slot.id].bonus;\r\n        const bonusResult = calculateSlotSetGain(slot.id, bonusData.rarity, bonusData.setA, currentStats);\r\n        const bonusGain = bonusResult.gain;\r\n\r\n        summaryData.push({\r\n            slotId: slot.id,\r\n            slotName: slot.name,\r\n            regularGain,\r\n            regularRarity: regularData.rarity,\r\n            bonusGain,\r\n            bonusRarity: bonusData.rarity\r\n        });\r\n    });\r\n\r\n    // Sort by selected column\r\n    if (summarySortColumn === 'regular') {\r\n        summaryData.sort((a, b) => summarySortDescending ? b.regularGain - a.regularGain : a.regularGain - b.regularGain);\r\n    } else {\r\n        summaryData.sort((a, b) => summarySortDescending ? b.bonusGain - a.bonusGain : a.bonusGain - b.bonusGain);\r\n    }\r\n\r\n    // Build HTML table with sortable headers\r\n    const regularSortIndicator = summarySortColumn === 'regular' ? (summarySortDescending ? ' \u25BC' : ' \u25B2') : '';\r\n    const bonusSortIndicator = summarySortColumn === 'bonus' ? (summarySortDescending ? ' \u25BC' : ' \u25B2') : '';\r\n\r\n    let html = `\r\n        <table class=\"stat-weight-table\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"text-align: center;\">Slot</th>\r\n                    <th style=\"text-align: center; cursor: pointer; user-select: none;\" onclick=\"window.sortCubeSummaryBy('regular')\">\r\n                        Regular Potential${regularSortIndicator}<br>\r\n                        <span style=\"font-size: 0.8em; font-weight: 400;\">(Set A Gain)</span>\r\n                    </th>\r\n                    <th style=\"text-align: center; cursor: pointer; user-select: none;\" onclick=\"window.sortCubeSummaryBy('bonus')\">\r\n                        Bonus Potential${bonusSortIndicator}<br>\r\n                        <span style=\"font-size: 0.8em; font-weight: 400;\">(Set A Gain)</span>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n    `;\r\n\r\n    summaryData.forEach((data) => {\r\n        html += `\r\n            <tr>\r\n                <td style=\"font-weight: 600; text-align: center;\">${data.slotName}</td>\r\n                <td style=\"text-align: center;\">\r\n                    <div style=\"color: ${data.regularGain >= 0 ? '#4ade80' : '#f87171'}; font-weight: 600; margin-bottom: 4px;\">\r\n                        ${data.regularGain >= 0 ? '+' : ''}${data.regularGain.toFixed(2)}%\r\n                    </div>\r\n                    <div style=\"font-size: 0.8em; color: var(--text-secondary);\">\r\n                        ${data.regularRarity.charAt(0).toUpperCase() + data.regularRarity.slice(1)}\r\n                    </div>\r\n                </td>\r\n                <td style=\"text-align: center;\">\r\n                    <div style=\"color: ${data.bonusGain >= 0 ? '#4ade80' : '#f87171'}; font-weight: 600; margin-bottom: 4px;\">\r\n                        ${data.bonusGain >= 0 ? '+' : ''}${data.bonusGain.toFixed(2)}%\r\n                    </div>\r\n                    <div style=\"font-size: 0.8em; color: var(--text-secondary);\">\r\n                        ${data.bonusRarity.charAt(0).toUpperCase() + data.bonusRarity.slice(1)}\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        `;\r\n    });\r\n\r\n    html += `\r\n            </tbody>\r\n        </table>\r\n    `;\r\n\r\n    resultsDiv.innerHTML = html;\r\n}\r\n\r\n/**\r\n * Sort summary by column\r\n */\r\nexport function sortCubeSummaryBy(column: 'regular' | 'bonus'): void {\r\n    if (summarySortColumn === column) {\r\n        summarySortDescending = !summarySortDescending;\r\n    } else {\r\n        summarySortColumn = column;\r\n        summarySortDescending = true;\r\n    }\r\n    displayAllSlotsSummary();\r\n}\r\n\r\n// ============================================================================\r\n// GLOBAL FUNCTION EXPOSURE\r\n// ============================================================================\r\n\r\n/**\r\n * Expose functions to window for HTML onclick handlers\r\n */\r\nfunction exposeGlobalFunctions(): void {\r\n    (window as any).switchCubePotentialType = switchPotentialType;\r\n    (window as any).selectCubeSlot = selectCubeSlot;\r\n    (window as any).sortCubeSummaryBy = sortCubeSummaryBy;\r\n    (window as any).changeCubeRankingsPage = changeRankingsPage;\r\n}\r\n\r\n/**\r\n * Change rankings page\r\n */\r\nexport function changeRankingsPage(newPage: number): void {\r\n    currentRankingsPage = newPage;\r\n    // Rankings display will be updated when tab is visible\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
